<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Well Visualization</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div id="well-3d-plot" style="width: 700px; height: 600px;"></div>
    <script>
        // JSON dosyasını yükleyip işleyen fonksiyon
        async function loadAndPlotData() {
            try {
                // JSON dosyasının URL'sini belirtin
                const response = await fetch('/data/TestWellDirectionSurvey.json');
                const wellData = await response.json();

                // Son iki terimi çıkarıyoruz
                const path = wellData.path.slice(0, -2);

                // Hesaplama için başlangıç değerlerini ayarlıyoruz
                let dxTotal = 0;
                let dyTotal = 0;
                const x = [];
                const y = [];
                const z = [];

                for (const point of path) {
                    const [dx, dy, dz] = point;

                    dxTotal += dx;
                    dyTotal += dy;

                    const dzNegative = -dz;

                    x.push(dxTotal);
                    y.push(dyTotal);
                    z.push(dzNegative); // TVD etkilenmeyecek, olduğu gibi kullanıyoruz
                }

                const trace = {
                    x: x,
                    y: y,
                    z: z,
                    mode: 'lines',
                    type: 'scatter3d',
                    line: {
                        color: 'blue',
                        width: 6
                    }
                };

                const layout = {
                    scene: {
                        xaxis: { title: 'DX' },
                        yaxis: { title: 'DY' },
                        zaxis: { title: 'TVD' }
                    },
                    title: '3D Well Path'
                };

                Plotly.newPlot('well-3d-plot', [trace], layout);
            } catch (error) {
                console.error('Error loading or plotting data:', error);
            }
        }

        // Fonksiyonu çağırarak veriyi yükleyip grafiği oluşturuyoruz
        loadAndPlotData();
    </script>
</body>
</html>
